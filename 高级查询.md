### 复习数据的增删改查

- 添加
  
  ```sql
  insert into t_user(username,xxx,xx) value ('xx','xx',22)
  ```

- 修改
  
  ```sql
  update t_user set xx=xx where xx=xx
  ```

- 删除
  
  ```sql
  delete from t_user where xx=xx
  ```

- 查询
  
  ```sql
  select * from t_user where xx=xx
  ```

### 数据关联

- 1:1(一对一)
  
  在任意一端加入外键，员工和用户就是一对一，学生和用户的关系

- 1:n(一对多)
  
  在多的一张表中加外键，班级和学生

- m:n(多对多)

        增加一张关联表，存储两个表的外键

### 查询

##### 基础查询

- 查询年龄大于等于20岁的男同学
  
  ```sql
  select * from t_stu where age>=20 and gender='男'
  ```

- 查询所有姓张的同学
  
  ```sql
  select * from t_stu where name like '张%' #查询所有姓张的同学
  
  select * from t_stu where name like '%羽%'
  ```

- 投影查询
  
  投影除了*之外还可以直接指定
  
  ```sql
  select id,name,gender from t_stu;
  select id as '标识',name as '姓名' from t_stu where id<10
  ```

- or查询
  
  or表示的就是或者，and表示的是并且
  
  ```sql
  select * from t_stu where id<10 or cid!=1;
  ```

- in查询
  
  ```sql
  select * from t_stu where cid in(1,4,5)
  select * from t_stu where cid not in(1,4,5)
  ```

- null查询
  
  ```sql
  select * from t_stu where cid=null #null查询不能使用=符号
  select * from t_stu where cid is null;
  select * from t_stu where cid is not null;
  ```

##### 跨表查询

- 98年以前使用and来完成表的连接
  
  ```sql
  #以下代码完成了两张表的连接，使用的是内连接，两张表中都有连接数据的才会查询出来，
  #如:如班级表中的id为11和12的都没有学生，不会查询出来，学生表中id>=190的没有班级
  #也不会被查询出来
  select * from t_stu t1,t_classroom t2 where t1.cid=t2.id and t2.grade=2015 and t1.gender='男';
  #t1.*表示学生的所有投影，t2.name as cname表示班级的名称并且重命名为cname
  select t1.*,t2.name as cname from t_stu t1,t_classroom t2 where t1.cid=t2.id and t2.grade=2015 and t1.gender='男'
  ```
  
  - 查询15物联网技术中年龄大于21岁的所有女生
    
    ```sql
    select * from t_stu t1,t_classroom t2 where t1.cid=t2.id and t2.name='15物联网技术' and t1.age>21 and t1.gender='女;'
    ```

- 新版跨表查询
  
  使用的是join进行查询,直接使用join就是内连接查询
  
  ```sql
  #内连接查询
  select * from t_stu t1 join t_classroom t2 on(t2.id=t1.cid) where t1.cid=4;
  ```
  
  使用join更多的时候会用到左外连接和右外连接
  
  ```sql
  #左外连接,先把左边表的数据列出来，之后再加入右边表的数据，如果右边表中连接数据，会设置为null
  select * from t_classroom t1 left join t_stu t2 on (t1.id=t2.cid);
  #右外连接
  select * from t_classroom t1 right join t_stu t2 on(t1.id=t2.cid);
  ```

- 高级查询
  
  ```sql
  #查询15级的同学学习的所有课程
  select * from t_classroom t1 join t_stu t2 on(t1.id=t2.cid) join t_stu_cur t3 on(t3.sid=t2.id) join t_course t4 on(t4.id=t3.cid);
  #以上查询出来的数据是所有的投影，可以进行投影的优化
  select t4.* from t_classroom t1 join t_stu t2 on(t1.id=t2.cid) join t_stu_cur t3 on(t3.sid=t2.id) join t_course t4 on(t4.id=t3.cid);
  #以上查询出来的结果有重复，可以使用distinct进行排重
  select distinct t4.* from t_classroom t1 join t_stu t2 on(t1.id=t2.cid) join t_stu_cur t3 on(t3.sid=t2.id) join t_course t4 on(t4.id=t3.cid);
  ```

- 作业
  
  - 查询2015级中网页设计不及格的同学
  
  - 查询2014级中所有的课程，并且选取一门课程来获取所有女同学的成绩


